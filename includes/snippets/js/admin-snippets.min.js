!function(e){const{createElement:t,useState:n}=e.element,{ToggleControl:o}=e.components,{createRoot:a}=e.element,{__:s}=e.i18n,{VisuallyHidden:l}=e.components;function i(e){const[a,i]=n(e.initialDisabled||!1),[d,c]=n(!1);return t("div",{},[t(l,{},s(a?"Snippet is disabled":"Snippet is active","add-to-all")),t(o,{checked:!a,onChange:()=>{c(!0);const t=new FormData;t.append("action","ata_toggle_snippet"),t.append("post_id",e.postId),t.append("nonce",e.nonce),fetch(e.ajaxurl,{method:"POST",body:t,credentials:"same-origin"}).then(e=>(console.log("Response:",e),e.json())).then(e=>{console.log("Data:",e),e.success?(console.log("Setting disabled to:",e.data.disabled),i(e.data.disabled)):console.error("Error toggling snippet:",e.data.message)}).finally(()=>{c(!1)})},disabled:d,className:"ata-snippet-toggle"})])}document.addEventListener("DOMContentLoaded",function(){const e=document.querySelectorAll(".ata-snippet-toggle-wrapper");console.log("Found toggle wrappers:",e.length),e.forEach(function(e){const n=e.dataset.postId,o=e.dataset.nonce,s=window["ataSnippetData_"+n]||{disabled:!1};console.log("Initializing toggle for post:",n,"with data:",s);a(e).render(t(i,{postId:n,nonce:o,initialDisabled:s.disabled,ajaxurl:s.ajaxurl}))})})}(wp);